<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Banner Fix</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .result { padding: 10px; margin: 10px 0; border-radius: 4px; background: #f8f9fa; border: 1px solid #dee2e6; }
    </style>
</head>
<body>
    <h1>üß™ Banner Fix Test</h1>
    
    <button onclick="testCredentials()">Test Credentials</button>
    <button onclick="testBannerRemoval()">Test Banner Removal</button>
    <button onclick="simulateBanner()">Simulate Banner Creation</button>
    <button onclick="runIntegrationFix()">Run Integration Fix</button>
    
    <div id="results"></div>

    <script src="js/server-credential-manager.js"></script>
    <script src="js/credential-integration-fix.js"></script>

    <script>
        function addResult(message) {
            const div = document.createElement('div');
            div.className = 'result';
            div.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            document.getElementById('results').appendChild(div);
        }

        async function testCredentials() {
            try {
                await window.serverCredentialManager.initialize();
                const hasCredentials = window.serverCredentialManager.hasCredentials();
                addResult(`Server credentials: ${hasCredentials ? 'Available ‚úÖ' : 'Missing ‚ùå'}`);
            } catch (error) {
                addResult(`Error: ${error.message}`);
            }
        }

        function simulateBanner() {
            // Create a fake banner to test removal
            const banner = document.createElement('div');
            banner.id = 'googleSheetsSetupBanner';
            banner.style.cssText = 'background: #ffc107; padding: 10px; margin: 10px 0; border-radius: 4px;';
            banner.textContent = 'üìä Google Sheets Not Connected (Test Banner)';
            document.body.appendChild(banner);
            addResult('Created test banner');
        }

        function testBannerRemoval() {
            const banner = document.getElementById('googleSheetsSetupBanner');
            if (banner) {
                banner.remove();
                addResult('Banner removed');
            } else {
                addResult('No banner found');
            }
        }

        async function runIntegrationFix() {
            try {
                await window.credentialIntegrationFix.init();
                addResult('Integration fix initialized');
            } catch (error) {
                addResult(`Integration fix error: ${error.message}`);
            }
        }
    </script>
</body>
</html>