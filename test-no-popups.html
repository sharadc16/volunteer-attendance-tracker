<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test No Annoying Popups</title>
    <link rel="stylesheet" href="css/styles.css?v=1.1">
    <link rel="stylesheet" href="css/mobile-status-optimization.css?v=1.0">
    <link rel="stylesheet" href="css/mobile-status-quick-fix.css?v=1.0">
    <style>
        body {
            padding: 2rem;
            background: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            margin: 0.5rem;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn.success {
            background: #28a745;
        }
        .btn.success:hover {
            background: #218838;
        }
        .console-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 1rem;
        }
        .status-demo {
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üö´ No More Annoying Popups Test</h1>
        
        <div class="test-section">
            <h3>‚úÖ Fixed: Removed Annoying Popups</h3>
            <p>The following actions now work silently without showing annoying alert popups:</p>
            <ul>
                <li>Scanner force enable</li>
                <li>Test event creation</li>
                <li>Status updates</li>
                <li>Routine system operations</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>üß™ Test Scanner Operations (No Popups)</h3>
            <div class="status-demo">
                <div class="scanner-header">
                    <h2>üì± Scan Volunteer Badge</h2>
                    <div class="scanner-status-container">
                        <div class="scanner-status ready" id="testScannerStatus" title="üì± Scanner Status: Ready to scan volunteer badges">
                            <span class="scanner-indicator ready"></span>
                            <span class="scanner-text">Scanner</span>
                        </div>
                        <div class="sync-status-compact offline" id="testSyncStatus" title="‚òÅÔ∏è Sync Status: Not connected to Google Sheets">
                            <span class="sync-status-indicator offline"></span>
                            <span class="sync-status-text">Sync</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn" onclick="testForceEnable()">
                üîß Test Force Enable (No Popup)
            </button>
            <button class="btn" onclick="testStatusUpdate()">
                üîÑ Test Status Update (No Popup)
            </button>
            <button class="btn success" onclick="testCreateEvent()">
                üìÖ Test Create Event (No Popup)
            </button>
        </div>

        <div class="test-section">
            <h3>üìä Console Output (Check Here Instead of Popups)</h3>
            <p>All success messages now appear in the console instead of annoying popups:</p>
            <div class="console-output" id="consoleOutput">
                Console messages will appear here...
            </div>
            <button class="btn" onclick="clearConsole()">Clear Console</button>
        </div>

        <div class="test-section">
            <h3>‚úÖ What Was Fixed</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div style="background: #f8d7da; padding: 1rem; border-radius: 6px; border-left: 4px solid #dc3545;">
                    <h4 style="color: #721c24; margin: 0 0 0.5rem 0;">‚ùå Before</h4>
                    <ul style="margin: 0; color: #721c24; font-size: 0.9rem;">
                        <li>alert('‚úÖ Scanner enabled successfully!')</li>
                        <li>alert('‚úÖ Test event created!')</li>
                        <li>Constant popup interruptions</li>
                        <li>Poor user experience</li>
                    </ul>
                </div>
                <div style="background: #d4edda; padding: 1rem; border-radius: 6px; border-left: 4px solid #28a745;">
                    <h4 style="color: #155724; margin: 0 0 0.5rem 0;">‚úÖ After</h4>
                    <ul style="margin: 0; color: #155724; font-size: 0.9rem;">
                        <li>console.log('‚úÖ Scanner enabled')</li>
                        <li>Silent success operations</li>
                        <li>Status updates via UI indicators</li>
                        <li>Smooth user experience</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="js/unified-status-manager.js"></script>
    <script>
        // Capture console.log messages and display them
        const originalLog = console.log;
        const consoleOutput = document.getElementById('consoleOutput');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.join(' ');
            const timestamp = new Date().toLocaleTimeString();
            consoleOutput.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };

        function testForceEnable() {
            console.log('üîß Testing force enable scanner...');
            
            // Simulate the old behavior (with popup) vs new behavior (no popup)
            const scannerStatus = document.getElementById('testScannerStatus');
            const indicator = scannerStatus.querySelector('.scanner-indicator');
            const text = scannerStatus.querySelector('.scanner-text');
            
            // Update status visually
            scannerStatus.classList.remove('warning', 'error');
            scannerStatus.classList.add('ready');
            indicator.classList.remove('warning', 'error');
            indicator.classList.add('ready');
            text.textContent = 'Ready';
            
            // Log success instead of showing popup
            console.log('‚úÖ Scanner force-enabled successfully! (No annoying popup)');
            console.log('üì± Scanner is now ready to scan volunteer badges');
        }

        function testStatusUpdate() {
            console.log('üîÑ Testing status update...');
            
            const syncStatus = document.getElementById('testSyncStatus');
            const indicator = syncStatus.querySelector('.sync-status-indicator');
            const text = syncStatus.querySelector('.sync-status-text');
            
            // Cycle through statuses
            const statuses = ['online', 'syncing', 'offline'];
            const currentStatus = syncStatus.classList.contains('online') ? 'online' : 
                                syncStatus.classList.contains('syncing') ? 'syncing' : 'offline';
            const currentIndex = statuses.indexOf(currentStatus);
            const nextStatus = statuses[(currentIndex + 1) % statuses.length];
            
            // Update status
            syncStatus.classList.remove('online', 'syncing', 'offline');
            syncStatus.classList.add(nextStatus);
            indicator.classList.remove('online', 'syncing', 'offline');
            indicator.classList.add(nextStatus);
            
            const statusMessages = {
                online: 'Connected to Google Sheets',
                syncing: 'Syncing data to Google Sheets',
                offline: 'Not connected to Google Sheets'
            };
            
            console.log(`‚òÅÔ∏è Sync status updated to: ${nextStatus} - ${statusMessages[nextStatus]}`);
            console.log('‚ÑπÔ∏è Status updated silently without popup interruption');
        }

        function testCreateEvent() {
            console.log('üìÖ Testing event creation...');
            
            // Simulate event creation
            const event = {
                name: 'Test Event',
                date: new Date().toISOString().split('T')[0],
                type: 'Test'
            };
            
            // Log success instead of showing popup
            console.log('‚úÖ Test event created successfully! (No annoying popup)');
            console.log(`üìÖ Event: ${event.name} for ${event.date}`);
            console.log('üéØ Scanner should now work properly');
        }

        function clearConsole() {
            consoleOutput.innerHTML = 'Console cleared...';
        }

        // Initial message
        console.log('üö´ No More Annoying Popups Test Loaded');
        console.log('‚úÖ All success messages now appear here instead of popup alerts');
        console.log('üéâ Much better user experience!');
    </script>
</body>
</html>